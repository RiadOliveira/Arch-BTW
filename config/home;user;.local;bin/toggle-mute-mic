#!/bin/bash

wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
volume=$(wpctl get-volume @DEFAULT_AUDIO_SOURCE@)

if echo "$volume" | grep -q "MUTED"; then
  notify-send -a "[Microphone]" -r 3 -t 2000 -h int:value:0 -h string:fgcolor:"#f8823e" "Muted"
else
  vol_percent=$(echo "$volume" | awk '{print int($2 * 100)}')
  notify-send -a "[Microphone]" -r 3 -t 2000 -h int:value:"$vol_percent" -h string:fgcolor:"#f8823e" "$vol_percent%"
fi
